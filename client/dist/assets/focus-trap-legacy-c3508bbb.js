System.register(["./index-legacy-2707c0c2.js","./index-legacy-67f0bd9d.js"],(function(e,t){"use strict";var n,o,s,r,a,c,u,d,l,i,f,p,v;return{setters:[e=>{n=e.aA,o=e.y,s=e.z,r=e.r,a=e.n,c=e.q,u=e.t,d=e.G,l=e.e,i=e.s,f=e.J,p=e.ah},e=>{v=e.a}],execute:function(){let t;e("s",(function(e,t){if(!n)return;if(!t)return void(e.scrollTop=0);const o=[];let s=t.offsetParent;for(;null!==s&&e!==s&&e.contains(s);)o.push(s),s=s.offsetParent;const r=t.offsetTop+o.reduce(((e,t)=>e+t.offsetTop),0),a=r+t.offsetHeight,c=e.scrollTop,u=c+e.clientHeight;r<c?e.scrollTop=r:a>u&&(e.scrollTop=a-e.clientHeight)})),e("g",(e=>{var o;if(!n)return 0;if(void 0!==t)return t;const s=document.createElement("div");s.className=`${e}-scrollbar__wrap`,s.style.visibility="hidden",s.style.width="100px",s.style.position="absolute",s.style.top="-9999px",document.body.appendChild(s);const r=s.offsetWidth;s.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",s.appendChild(a);const c=a.offsetWidth;return null==(o=s.parentNode)||o.removeChild(s),t=r-c,t}));const m=e("E",{tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"});let E=[];const y=e=>{const t=e;t.key===m.esc&&E.forEach((e=>e(t)))},w="focus-trap.focus-after-trapped",h="focus-trap.focus-after-released",T={cancelable:!0,bubbles:!1},b={cancelable:!0,bubbles:!1},g="focusAfterTrapped",L="focusAfterReleased",k=e("F",Symbol("elFocusTrap")),P=r(),N=r(0),R=r(0);let F=0;const S=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0||e===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},A=(e,t)=>{for(const n of e)if(!K(n,t))return n},K=(e,t)=>{if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1},C=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),R.value=window.performance.now(),e!==n&&(e=>e instanceof HTMLInputElement&&"select"in e)(e)&&t&&e.select()}};function x(e,t){const n=[...e],o=e.indexOf(t);return-1!==o&&n.splice(o,1),n}const I=(()=>{let e=[];return{push:t=>{const n=e[0];n&&t!==n&&n.pause(),e=x(e,t),e.unshift(t)},remove:t=>{var n,o;e=x(e,t),null==(o=null==(n=e[0])?void 0:n.resume)||o.call(n)}}})(),_=()=>{P.value="pointer",N.value=window.performance.now()},D=()=>{P.value="keyboard",N.value=window.performance.now()},H=()=>(o((()=>{0===F&&(document.addEventListener("mousedown",_),document.addEventListener("touchstart",_),document.addEventListener("keydown",D)),F++})),s((()=>{F--,F<=0&&(document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_),document.removeEventListener("keydown",D))})),{focusReason:P,lastUserFocusTimestamp:N,lastAutomatedFocusTimestamp:R}),j=e=>new CustomEvent("focus-trap.focusout-prevented",{...b,detail:e}),U=c({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[g,L,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const a=r();let c,i;const{focusReason:b}=H();var P;P=n=>{e.trapped&&!F.paused&&t("release-requested",n)},o((()=>{0===E.length&&document.addEventListener("keydown",y),n&&E.push(P)})),s((()=>{E=E.filter((e=>e!==P)),0===E.length&&n&&document.removeEventListener("keydown",y)}));const F={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},K=n=>{if(!e.loop&&!e.trapped)return;if(F.paused)return;const{key:o,altKey:s,ctrlKey:r,metaKey:a,currentTarget:c,shiftKey:u}=n,{loop:d}=e,l=o===m.tab&&!s&&!r&&!a,i=document.activeElement;if(l&&i){const e=c,[o,s]=(e=>{const t=S(e);return[A(t,e),A(t.reverse(),e)]})(e);if(o&&s)if(u||i!==s){if(u&&[o,e].includes(i)){const e=j({focusReason:b.value});t("focusout-prevented",e),e.defaultPrevented||(n.preventDefault(),d&&C(s,!0))}}else{const e=j({focusReason:b.value});t("focusout-prevented",e),e.defaultPrevented||(n.preventDefault(),d&&C(o,!0))}else if(i===e){const e=j({focusReason:b.value});t("focusout-prevented",e),e.defaultPrevented||n.preventDefault()}}};u(k,{focusTrapRef:a,onKeydown:K}),d((()=>e.focusTrapEl),(e=>{e&&(a.value=e)}),{immediate:!0}),d([a],(([e],[t])=>{e&&(e.addEventListener("keydown",K),e.addEventListener("focusin",D),e.addEventListener("focusout",U)),t&&(t.removeEventListener("keydown",K),t.removeEventListener("focusin",D),t.removeEventListener("focusout",U))}));const x=e=>{t(g,e)},_=e=>t(L,e),D=n=>{const o=l(a);if(!o)return;const s=n.target,r=n.relatedTarget,u=s&&o.contains(s);e.trapped||r&&o.contains(r)||(c=r),u&&t("focusin",n),F.paused||e.trapped&&(u?i=s:C(i,!0))},U=n=>{const o=l(a);if(!F.paused&&o)if(e.trapped){const s=n.relatedTarget;v(s)||o.contains(s)||setTimeout((()=>{if(!F.paused&&e.trapped){const e=j({focusReason:b.value});t("focusout-prevented",e),e.defaultPrevented||C(i,!0)}}),0)}else{const e=n.target;e&&o.contains(e)||t("focusout",n)}};async function O(){await f();const t=l(a);if(t){I.push(F);const n=t.contains(document.activeElement)?c:document.activeElement;if(c=n,!t.contains(n)){const o=new Event(w,T);t.addEventListener(w,x),t.dispatchEvent(o),o.defaultPrevented||f((()=>{let o=e.focusStartEl;p(o)||(C(o),document.activeElement!==o&&(o="first")),"first"===o&&((e,t=!1)=>{const n=document.activeElement;for(const o of e)if(C(o,t),document.activeElement!==n)return})(S(t),!0),document.activeElement!==n&&"container"!==o||C(t)}))}}}function W(){const e=l(a);if(e){e.removeEventListener(w,x);const t=new CustomEvent(h,{...T,detail:{focusReason:b.value}});e.addEventListener(h,_),e.dispatchEvent(t),t.defaultPrevented||"keyboard"!=b.value&&N.value>R.value&&!e.contains(document.activeElement)||C(null!=c?c:document.body),e.removeEventListener(h,_),I.remove(F)}}return o((()=>{e.trapped&&O(),d((()=>e.trapped),(e=>{e?O():W()}))})),s((()=>{e.trapped&&W()})),{onKeydown:K}}});e("a",a(U,[["render",function(e,t,n,o,s,r){return i(e.$slots,"default",{handleKeydown:e.onKeydown})}],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]))}}}));
