import{_ as D}from"./logo-94eace13.js";import{_ as y,u as z,r as n,a as R,o as g,c as C,b as e,d as s,w as d,e as v,f as N,l as k,g as x,h as G,v as H,i as q,m as $,E as J,p as E,j as I,k as K}from"./index-ee9a4261.js";import{E as B,a as F}from"./form-item-c20a48e0.js";import{E as O}from"./checkbox-91a85363.js";/* empty css              */import{E as T}from"./index-eb89c5ee.js";import"./use-form-item-d271546b.js";import"./castArray-f5426a68.js";import"./event-fbb285ad.js";import"./index-f5ca2c44.js";import"./isEqual-5a33b929.js";import"./icon-28d7bd83.js";const P=""+new URL("../images/gjw.png",import.meta.url).href;const Q=o=>(E("data-v-fa2af72f"),o=o(),I(),o),W={class:"login-box"},X=Q(()=>e("div",{class:"login_hd"},"用户登录",-1)),Y={class:"login_bd"},Z={class:"remember"},ee={class:"sub"},se=["disabled"],oe={class:"link"},te={__name:"LoginVue",emits:["changeVue"],setup(o,{emit:f}){const t=z(),_=n(!1),w=n("password"),c=i=>{i?(_.value=!1,w.value="password"):(_.value=!0,w.value="text")},V=R(),l=n({username:V.userName||"",password:""}),h={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:12,message:"用户名必须是 6-12位 的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,12}$/,message:"密码必须是 6-12位 的非空字符",trigger:"blur"}]},a=n(),u=n(!1),p=n(!1);l.value.username&&(p.value=!0);const b=async()=>{await a.value.validate(),await V.userLogin(l.value),$("登录成功"),p.value?V.setUserName(l.value.username):V.setUserName(""),a.value.resetFields(),u.value=!0,setTimeout(()=>{t.replace({path:"/"})},500)};return(i,r)=>{const U=T,L=B,j=J,M=O,A=F;return g(),C("div",W,[X,e("div",Y,[s(A,{model:l.value,rules:h,ref_key:"form",ref:a},{default:d(()=>[s(L,{prop:"username"},{default:d(()=>[s(U,{modelValue:l.value.username,"onUpdate:modelValue":r[0]||(r[0]=m=>l.value.username=m),"prefix-icon":v(N),placeholder:"请输入账号"},null,8,["modelValue","prefix-icon"])]),_:1}),s(L,{prop:"password"},{default:d(()=>[s(U,{modelValue:l.value.password,"onUpdate:modelValue":r[1]||(r[1]=m=>l.value.password=m),"prefix-icon":v(k),type:w.value,placeholder:"请输入密码"},null,8,["modelValue","prefix-icon","type"]),s(j,null,{default:d(()=>[_.value?(g(),x(v(G),{key:0,onClick:r[2]||(r[2]=m=>c(!0))})):(g(),x(v(H),{key:1,onClick:r[3]||(r[3]=m=>c(!1))}))]),_:1})]),_:1}),e("p",Z,[s(M,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=m=>p.value=m),label:"记住账号"},null,8,["modelValue"])])]),_:1},8,["model"]),e("div",ee,[e("button",{onClick:b,disabled:u.value},"登 录",8,se)]),e("div",oe,[q(" 没有账号？去 "),e("span",{onClick:r[5]||(r[5]=m=>f("changeVue",!1))},"注册")])])])}}},ae=y(te,[["__scopeId","data-v-fa2af72f"]]);const re=o=>(E("data-v-6893273c"),o=o(),I(),o),le={class:"login-box"},ne=re(()=>e("div",{class:"login_hd"},"用户注册",-1)),ue={class:"login_bd"},ie={class:"link"},de={__name:"RegisterVue",emits:["changeVue"],setup(o,{emit:f}){const t=n({username:"",password:"",repassword:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:6,max:12,message:"用户名必须是 6-12位 的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,12}$/,message:"密码必须是 6-12位 的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,12}$/,message:"密码必须是 6-12位 的非空字符",trigger:"blur"},{validator:(h,a,u)=>{a!==t.value.password?u(new Error("两次输入密码不一致")):u()},trigger:"change"}]},w=R(),c=n(),V=n(!0),l=async()=>{if(!V.value)return $("接口已关闭");await c.value.validate(),await w.userReg(t.value),$("注册成功"),c.value.resetFields(),f("changeVue",!0)};return(h,a)=>{const u=T,p=B,b=F;return g(),C("div",le,[ne,e("div",ue,[s(b,{model:t.value,rules:_,ref_key:"form",ref:c,autocomplete:"off","status-icon":""},{default:d(()=>[s(p,{prop:"username"},{default:d(()=>[s(u,{modelValue:t.value.username,"onUpdate:modelValue":a[0]||(a[0]=i=>t.value.username=i),"prefix-icon":v(N),placeholder:"请输入账号"},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{prop:"password"},{default:d(()=>[s(u,{modelValue:t.value.password,"onUpdate:modelValue":a[1]||(a[1]=i=>t.value.password=i),"prefix-icon":v(k),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{prop:"repassword"},{default:d(()=>[s(u,{modelValue:t.value.repassword,"onUpdate:modelValue":a[2]||(a[2]=i=>t.value.repassword=i),"prefix-icon":v(k),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1},8,["model"]),e("div",{class:"sub"},[e("button",{onClick:l},"注 册")]),e("div",ie,[q(" 已有账号？去 "),e("span",{onClick:a[3]||(a[3]=i=>f("changeVue",!0))},"登录")])])])}}},_e=y(de,[["__scopeId","data-v-6893273c"]]);const S=o=>(E("data-v-83a56fc1"),o=o(),I(),o),ce={class:"login"},pe={class:"layout"},me={class:"logo"},fe=S(()=>e("div",{class:"logo-box"},[e("img",{src:D,alt:""})],-1)),ve=S(()=>e("h3",null,"购 机 网",-1)),ge={class:"login-container"},we=S(()=>e("div",{class:"login-img"},[e("img",{src:P,alt:""})],-1)),Ve={__name:"index",setup(o){const f=n(!0),t=_=>{f.value=_};return(_,w)=>{const c=K("RouterLink");return g(),C("div",ce,[e("div",pe,[e("div",me,[s(c,{to:"/"},{default:d(()=>[fe,ve]),_:1})]),e("div",ge,[we,f.value?(g(),x(ae,{key:0,onChangeVue:t})):(g(),x(_e,{key:1,onChangeVue:t}))])])])}}},Re=y(Ve,[["__scopeId","data-v-83a56fc1"]]);export{Re as default};
