import{aL as E,_ as L,r,aM as D,G as M,o as a,c,b as e,e as C,W as w,R as $,aK as U,u as z,a as A,Z as F,aN as X,a6 as Y,g as b,a3 as p,d as B,w as y,i as x,V as k,a7 as I,m as N,a8 as j,p as K,j as O}from"./index-ee9a4261.js";import{E as P,a as T}from"./radio-3168007b.js";import"./event-fbb285ad.js";import"./use-form-item-d271546b.js";const W=d=>E.get("/goods/getGoodsByID/".concat(d));const Z={class:"product-show"},q=["src"],H={key:0,class:"big"},J=["src"],Q={__name:"LargeGlass",props:{goodsImg:String},setup(d){const m=d,g=r(null),_=r(0),u=r(0),t=r(0),f=r(0),{elementX:s,elementY:i,isOutside:v}=D(g);return M([s,i,v],()=>{v.value||(s.value>100&&s.value<300&&(_.value=s.value-100),i.value>100&&i.value<300&&(u.value=i.value-100),s.value>300&&(_.value=200),s.value<100&&(_.value=0),i.value>300&&(u.value=200),i.value<100&&(u.value=0),t.value=-_.value*2,f.value=-u.value*2)}),(V,n)=>(a(),c("div",Z,[e("div",{class:"product-img",ref_key:"target",ref:g},[e("img",{src:m.goodsImg,alt:""},null,8,q),C(v)?$("",!0):(a(),c("div",{key:0,class:"mask",style:w({left:"".concat(_.value,"px"),top:"".concat(u.value,"px")})},null,4))],512),C(v)?$("",!0):(a(),c("div",H,[e("img",{src:m.goodsImg,style:w({left:"".concat(t.value,"px"),top:"".concat(f.value,"px")}),alt:""},null,12,J)]))]))}},ee=L(Q,[["__scopeId","data-v-6ca6fe9f"]]);const h=d=>(K("data-v-0cb8a4ce"),d=d(),O(),d),se={class:"detail"},te={class:"layout"},oe={class:"product"},ae={class:"product-property"},le={class:"property-hd"},ie={class:"product-title"},ne={class:"product-des"},ce={class:"property-bd"},de={class:"probox"},ue={class:"form-item"},re=h(()=>e("label",{class:"type"},"选择颜色",-1)),_e={class:"form-item"},ve=h(()=>e("label",{class:"type"},"选择型号",-1)),pe={class:"form-item"},me=h(()=>e("label",{class:"type"},"选择数量",-1)),ge={class:"goodsNum"},fe={class:"form-item"},he=h(()=>e("label",{class:"type"},"商品价格",-1)),ye={class:"product-price"},be={key:0,class:"activity-box"},xe={class:"activity"},ke={class:"product-info"},Ie=h(()=>e("div",{class:"infohd"},"产品详情",-1)),$e={class:"infobd"},Ve={alt:""},Ge={__name:"index",setup(d){const m=U(),g=z(),_=A(),u=F(),t=r({}),f=r({gid:m.params.id,color:"",edition:"",num:1}),s=r({...f.value}),i=async(n=m.params.id)=>{try{const l=await W(n);t.value=l.data.data[0],t.value.edition=t.value.edition.split(","),t.value.color=t.value.color.split(","),t.value.goods_chart=t.value.goods_chart.split(","),s.value.color=t.value.color[0],s.value.edition=t.value.edition[0]}catch(l){g.replace("/detail/11001")}};i(),X(n=>{i(n.params.id),s.value={...f.value},s.value.gid=n.params.id});const v=n=>{if(s.value.num+=n,s.value.num<1)return s.value.num=1;if(s.value.num>99)return s.value.num=99},V=async()=>{_.token?(await u.addCart(s.value),N("商品添加成功"),u.getCartList()):(N("请先登录"),g.push("/login"))};return(n,l)=>{const G=T,S=P,R=Y("img-lazy");return a(),c("div",se,[e("div",te,[e("div",oe,[(a(),b(ee,{goodsImg:t.value.goods_img,key:n.$route.fullPath},null,8,["goodsImg"])),e("div",ae,[e("div",le,[e("div",ie,p(t.value.goodsname),1),e("div",ne,p(t.value.description),1)]),e("div",ce,[e("div",de,[e("div",ue,[re,B(S,{modelValue:s.value.color,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.color=o)},{default:y(()=>[(a(!0),c(k,null,I(t.value.color,o=>(a(),b(G,{label:o,key:o},{default:y(()=>[x(p(o),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),e("div",_e,[ve,B(S,{modelValue:s.value.edition,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.edition=o)},{default:y(()=>[(a(!0),c(k,null,I(t.value.edition,o=>(a(),b(G,{label:o,key:o},{default:y(()=>[x(p(o),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),e("div",pe,[me,e("span",{class:"numBtn",onClick:l[2]||(l[2]=o=>v(-1))},"-"),e("span",ge,p(s.value.num),1),e("span",{class:"numBtn",onClick:l[3]||(l[3]=o=>v(1))},"+")]),e("div",fe,[he,e("div",ye,[x(" ¥ "),e("span",null,p((t.value.price*s.value.num).toFixed(2)),1)])])]),t.value.activity?(a(),c("div",be,[e("div",xe,p(t.value.activity),1)])):$("",!0),e("button",{class:"btn",onClick:V},"加入购物车")])])])]),e("div",ke,[Ie,e("div",$e,[(a(!0),c(k,null,I(t.value.goods_chart,o=>(a(),c("div",{class:"img-box",key:o},[j(e("img",Ve,null,512),[[R,o]])]))),128))])])])}}},Ne=L(Ge,[["__scopeId","data-v-0cb8a4ce"]]);export{Ne as default};
