import{y as I,a5 as X,z as H,N as x,aZ as z,L as S,c1 as W,aA as U,b3 as M,G as D,bZ as F,b1 as q,c2 as $,b4 as V,bh as m,A as Z,B as C,q as _,d as j,s as L,aJ as G}from"./index-ee9a4261.js";import{t as J}from"./event-fbb285ad.js";import{g as K}from"./focus-trap-87bffed9.js";import{P as p}from"./vnode-18385f06.js";const Q='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',R=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,de=e=>Array.from(e.querySelectorAll(Q)).filter(t=>ee(t)&&R(t)),ee=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},te=e=>!e.getAttribute("aria-owns"),fe=(e,t,s)=>{const{parentNode:n}=e;if(!n)return null;const a=n.querySelectorAll(s),c=Array.prototype.indexOf.call(a,e);return a[c+t]||null},me=e=>{e&&(e.focus(),!te(e)&&e.click())},pe=(e,t,s)=>{let n={offsetX:0,offsetY:0};const a=u=>{const r=u.clientX,d=u.clientY,{offsetX:l,offsetY:f}=n,i=e.value.getBoundingClientRect(),v=i.left,b=i.top,T=i.width,k=i.height,A=document.documentElement.clientWidth,O=document.documentElement.clientHeight,N=-v+l,Y=-b+f,B=A-v-T+l,P=O-b-k+f,y=g=>{const E=Math.min(Math.max(l+g.clientX-r,N),B),w=Math.min(Math.max(f+g.clientY-d,Y),P);n={offsetX:E,offsetY:w},e.value.style.transform="translate(".concat(x(E),", ").concat(x(w),")")},h=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",h)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",a)},o=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)};I(()=>{X(()=>{s.value?c():o()})}),H(()=>{o()})},ve=(e,t={})=>{z(e)||J("[useLockscreen]","You need to pass a ref param to this function");const s=t.ns||S("popup"),n=W(()=>s.bm("parent","hidden"));if(!U||M(document.body,n.value))return;let a=0,c=!1,o="0";const u=()=>{setTimeout(()=>{V(document==null?void 0:document.body,n.value),c&&document&&(document.body.style.width=o)},200)};D(e,r=>{if(!r){u();return}c=!M(document.body,n.value),c&&(o=document.body.style.width),a=K(s.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,l=F(document.body,"overflowY");a>0&&(d||l==="scroll")&&c&&(document.body.style.width="calc(100% - ".concat(a,"px)")),q(document.body,n.value)}),$(()=>u())},oe=e=>{if(!e)return{onClick:m,onMousedown:m,onMouseup:m};let t=!1,s=!1;return{onClick:o=>{t&&s&&e(o),t=s=!1},onMousedown:o=>{t=o.target===o.currentTarget},onMouseup:o=>{s=o.target===o.currentTarget}}},ne=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:C([String,Array,Object])},zIndex:{type:C([String,Number])}}),se={click:e=>e instanceof MouseEvent},ae="overlay";var ce=_({name:"ElOverlay",props:ne,emits:se,setup(e,{slots:t,emit:s}){const n=S(ae),a=r=>{s("click",r)},{onClick:c,onMousedown:o,onMouseup:u}=oe(e.customMaskEvent?void 0:a);return()=>e.mask?j("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:o,onMouseup:u},[L(t,"default")],p.STYLE|p.CLASS|p.PROPS,["onClick","onMouseup","onMousedown"]):G("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[L(t,"default")])}});const be=ce;export{be as E,ve as a,oe as b,me as f,fe as g,te as i,de as o,pe as u};
