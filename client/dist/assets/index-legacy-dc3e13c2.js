System.register(["./index-legacy-2707c0c2.js","./button-legacy-ce556deb.js","./element-china-area-data-legacy-5f4c274a.js","./index-legacy-2a3740d3.js","./form-item-legacy-4be270d0.js","./input-legacy-13394860.js","./scrollbar-legacy-3f1e2b92.js","./tag-legacy-74a14f42.js","./checkbox-legacy-d56b2059.js","./radio-legacy-62560533.js","./index-legacy-67f0bd9d.js","./index-legacy-4d6b5697.js","./strings-legacy-9369af68.js","./isEqual-legacy-78c204ac.js","./index-legacy-03cb9026.js","./event-legacy-f9c53a7c.js","./focus-trap-legacy-c3508bbb.js","./vnode-legacy-923b6afa.js","./index-legacy-730aad8d.js","./use-form-item-legacy-68a04b22.js","./debounce-legacy-3cb8da16.js","./icon-legacy-2b8c2a20.js","./refs-legacy-2ade9e2d.js","./index-legacy-414939af.js","./castArray-legacy-08808e60.js"],(function(e,a){"use strict";var t,l,d,i,o,s,n,c,r,u,g,p,v,f,x,h,m,b,y,_,k,j,w,C,V,L,z,S,q;return{setters:[e=>{t=e._,l=e.r,d=e.o,i=e.c,o=e.d,s=e.w,n=e.i,c=e.b,r=e.V,u=e.a7,g=e.Q,p=e.a3,v=e.p,f=e.j,x=e.$,h=e.e,m=e.m,b=e.a,y=e.Z,_=e.a0,k=e.u,j=e.k},null,e=>{w=e.E,C=e.b,V=e.a},e=>{L=e.E},e=>{z=e.E,S=e.a},null,null,null,null,null,e=>{q=e.E},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".addressWrapper[data-v-9c6063fa]{max-height:500px;overflow-y:auto}.text[data-v-9c6063fa]{flex:1;min-height:90px;display:flex;align-items:center}.text.item[data-v-9c6063fa]{border:1px solid #f5f5f5;margin-bottom:10px;cursor:pointer}.text.item.active[data-v-9c6063fa],.text.item[data-v-9c6063fa]:hover{border-color:#ff6700;background:rgba(255,103,0,.05)}.text.item>ul[data-v-9c6063fa]{padding:10px;font-size:14px;line-height:30px}.checkout[data-v-ac680e04]{margin-top:40px;margin-bottom:40px}.checkout .layout[data-v-ac680e04]{background:#fff;padding:0 20px;box-shadow:0 3px 6px rgba(0,0,0,.04)}.checkout .layout .box-title[data-v-ac680e04]{font-size:16px;font-weight:400;padding-left:10px;line-height:70px;border-bottom:1px solid #f5f5f5}.checkout .layout .box-body[data-v-ac680e04]{padding:20px 0}.checkout .layout .box-body span[data-v-ac680e04]{cursor:pointer}.address[data-v-ac680e04]{border:1px solid #f5f5f5;display:flex;align-items:center}.address .text[data-v-ac680e04]{flex:1;min-height:90px;display:flex;align-items:center}.address .text .none[data-v-ac680e04]{line-height:90px;text-align:center;width:100%}.address .text>ul[data-v-ac680e04]{flex:1;padding:20px}.address .text>ul li[data-v-ac680e04]{line-height:30px}.address .text>ul li span[data-v-ac680e04]{margin-right:5px}.address .text>ul li span>i[data-v-ac680e04]{width:.5em;display:inline-block}.address .text>a[data-v-ac680e04]{color:#ff6700;width:160px;text-align:center;height:90px;line-height:90px;border-right:1px solid #f5f5f5}.address .action[data-v-ac680e04]{display:flex;justify-content:space-evenly;width:250px;margin-right:100px;text-align:center}.address .action .btn[data-v-ac680e04]{width:140px;height:46px;line-height:44px;font-size:14px}.address .action .btn[data-v-ac680e04]:first-child{margin-right:10px}.goods[data-v-ac680e04]{width:100%;border-collapse:collapse;border-spacing:0}.goods .info[data-v-ac680e04]{display:flex;text-align:left}.goods .info img[data-v-ac680e04]{height:70px;margin-right:20px;background-color:transparent}.goods .info .right[data-v-ac680e04]{line-height:24px}.goods .info .right p[data-v-ac680e04]{font-size:12px}.goods .info .right .g_name[data-v-ac680e04]{font-size:18px;font-weight:700}.goods .info .right .g_ed[data-v-ac680e04]{padding:0 5px;color:#ff6700;border:2px solid #ff6700;border-radius:5px}.goods .info .right .g_co[data-v-ac680e04]{color:#ff6700}.goods tr th[data-v-ac680e04]{background:#f5f5f5;font-weight:400}.goods tr td[data-v-ac680e04],.goods tr th[data-v-ac680e04]{text-align:center;padding:20px;border-bottom:1px solid #f5f5f5}.goods tr td[data-v-ac680e04]:first-child,.goods tr th[data-v-ac680e04]:first-child{border-left:1px solid #f5f5f5}.goods tr td[data-v-ac680e04]:last-child,.goods tr th[data-v-ac680e04]:last-child{border-right:1px solid #f5f5f5}.my-btn[data-v-ac680e04]{width:228px;height:50px;border:1px solid #e4e4e4;text-align:center;line-height:48px;margin-right:25px;color:#666;display:inline-block}.my-btn.active[data-v-ac680e04],.my-btn[data-v-ac680e04]:hover{border-color:#ff6700}.total dl[data-v-ac680e04]{display:flex;justify-content:flex-end;line-height:50px}.total dl dt i[data-v-ac680e04]{display:inline-block;width:2em}.total dl dd[data-v-ac680e04]{width:240px;text-align:right;padding-right:70px}.total dl dd.price[data-v-ac680e04]{font-size:20px;font-weight:700;color:#cf4444}.submit[data-v-ac680e04]{text-align:right;padding:60px;border-top:1px solid #f5f5f5}.empty[data-v-ac680e04]{font-size:18px;text-align:center}\n",document.head.appendChild(a);const E=e=>(v("data-v-9c6063fa"),e=e(),f(),e),U={class:"cut"},A={key:0,class:"addressWrapper"},F=["onClick"],D=E((()=>c("span",null,[n("收"),c("i"),n("货"),c("i"),n("人：")],-1))),N=E((()=>c("span",null,"联系方式：",-1))),P=E((()=>c("span",null,"收货地址：",-1))),R={key:1,class:"empty"},I={class:"dialog-footer"},J=t({__name:"CutDialog",props:{receList:{type:Array,default:()=>[]}},emits:["cutAddress"],setup(e,{emit:a}){const t=e,v=l(!1),f=l({}),x=()=>{f.value.phone&&a("cutAddress",f.value),v.value=!1};return(e,a)=>{const l=L,h=w;return d(),i("div",U,[o(l,{size:"large",onClick:a[0]||(a[0]=e=>v.value=!0)},{default:s((()=>[n("选择地址")])),_:1}),o(h,{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=e=>v.value=e),"lock-scroll":!1,title:"选择收货地址",width:"30%",center:""},{footer:s((()=>[c("span",I,[o(l,{onClick:a[1]||(a[1]=e=>v.value=!1)},{default:s((()=>[n("取消")])),_:1}),o(l,{type:"primary",onClick:x},{default:s((()=>[n("确定")])),_:1})])])),default:s((()=>[t.receList.length>0?(d(),i("div",A,[(d(!0),i(r,null,u(t.receList,(e=>(d(),i("div",{class:g(["text item",{active:f.value.id===e.id}]),onClick:a=>(e=>{f.value=e})(e),key:e.id},[c("ul",null,[c("li",null,[D,n(p(e.consignee),1)]),c("li",null,[N,n(p(e.phone),1)]),c("li",null,[P,n(p(e.area+e.address),1)])])],10,F)))),128))])):(d(),i("div",R,"暂无地址，去添加吧！"))])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-9c6063fa"]]),O={class:"cut"},W={class:"dialog-footer"},$={__name:"AddDialog",emits:["updateList"],setup(e,{emit:a}){const t=x(),r=l(),u=l(!1),g=l({phone:"",consignee:"",area:[],address:""}),p={consignee:[{required:!0,message:"请输入收货人",trigger:"blur"},{min:1,max:8,message:"收货人必须是 1-8位 的字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的联系电话",trigger:"blur"}],area:[{required:!0,message:"请选择收货区域",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},v=async()=>{await r.value.validate(),await t.addRece(g.value),m("添加地址成功"),u.value=!1,r.value.resetFields(),t.getReceList(),a("updateList")};return(e,a)=>{const t=L,l=q,f=z,x=V,m=S,b=w;return d(),i("div",O,[o(t,{size:"large",onClick:a[0]||(a[0]=e=>u.value=!0)},{default:s((()=>[n("添加地址")])),_:1}),o(b,{modelValue:u.value,"onUpdate:modelValue":a[6]||(a[6]=e=>u.value=e),"lock-scroll":!1,title:"添加收货地址",width:"30%",center:""},{footer:s((()=>[c("span",W,[o(t,{onClick:a[5]||(a[5]=e=>u.value=!1)},{default:s((()=>[n("取消")])),_:1}),o(t,{type:"primary",onClick:v},{default:s((()=>[n("确定")])),_:1})])])),default:s((()=>[o(m,{model:g.value,rules:p,ref_key:"receForm",ref:r,autocomplete:"off"},{default:s((()=>[o(f,{label:"收 货 人",prop:"consignee"},{default:s((()=>[o(l,{modelValue:g.value.consignee,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value.consignee=e)},null,8,["modelValue"])])),_:1}),o(f,{label:"联系电话",prop:"phone"},{default:s((()=>[o(l,{modelValue:g.value.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value.phone=e)},null,8,["modelValue"])])),_:1}),o(f,{label:"选择地区",prop:"area"},{default:s((()=>[o(x,{size:"large",options:h(C),modelValue:g.value.area,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value.area=e)},null,8,["options","modelValue"])])),_:1}),o(f,{label:"详细地址",prop:"address"},{default:s((()=>[o(l,{modelValue:g.value.address,"onUpdate:modelValue":a[4]||(a[4]=e=>g.value.address=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}},B=e=>(v("data-v-ac680e04"),e=e(),f(),e),H={class:"checkout"},Q={class:"container"},Z={class:"layout"},G=B((()=>c("h3",{class:"box-title"},"收货地址",-1))),K={class:"box-body"},M={class:"address"},T={class:"text"},X={key:0},Y=B((()=>c("i",null,null,-1))),ee=B((()=>c("i",null,null,-1))),ae={key:1,class:"none"},te={class:"action"},le=B((()=>c("h3",{class:"box-title"},"商品信息",-1))),de={class:"box-body"},ie={class:"goods"},oe=B((()=>c("thead",null,[c("tr",null,[c("th",{width:"520"},"商品信息"),c("th",{width:"170"},"单价"),c("th",{width:"170"},"数量"),c("th",{width:"170"},"小计"),c("th",{width:"170"},"实付")])],-1))),se=["src"],ne={class:"right"},ce={class:"g_name"},re={class:"g_ed"},ue={class:"g_co"},ge={style:{color:"crimson","font-weight":"bold"}},pe=B((()=>c("h3",{class:"box-title"},"配送时间",-1))),ve={class:"box-body"},fe=B((()=>c("h3",{class:"box-title"},"支付方式",-1))),xe={class:"box-body"},he=B((()=>c("span",{style:{color:"#999"}},"货到付款需付5元手续费",-1))),me=B((()=>c("h3",{class:"box-title"},"金额明细",-1))),be={class:"box-body"},ye={class:"total"},_e=B((()=>c("dt",null,"商品件数：",-1))),ke=B((()=>c("dt",null,"商品总价：",-1))),je=B((()=>c("dl",null,[c("dt",null,[n("运"),c("i"),n("费：")]),c("dd",null,"¥ 10")],-1))),we=B((()=>c("dt",null,"应付总额：",-1))),Ce={class:"price"},Ve={class:"submit"};e("default",t({__name:"index",setup(e){const a=b(),t=x(),v=y(),f=_(),w=k(),C=l({});a.token&&v.getCartSubmit(),v.cartSubmit.list.length<1&&w.replace("/cart");const V=()=>{t.receList.length>0&&(C.value=t.receList[0])};V();const z=e=>{C.value=e},S=l(1),q=l(1),E=e=>{S.value=e},U=e=>{q.value=e},A=new Date,F=async()=>{if(!C.value.phone)return m("请填写收货地址");const e=l({...C.value,total_num:v.cartSubmit.totalNum,total_price:v.cartSubmit.totalPrice+10,pay_method:"未支付",creat_date:A.toLocaleString(),goods_list:JSON.stringify(v.cartSubmit.list.map((e=>({id:e.id,uid:e.uid,gid:e.goods_id,goods_img:e.goods_img.substring(14),goodsname:e.goodsname,price:e.price,goods_num:e.goods_num,goods_edition:e.goods_edition,goods_color:e.goods_color}))))}),a=(await f.addOrder(e.value)).data.id;v.getCartList(),m("订单创建成功"),w.replace({path:"/pay",query:{id:a}})};return(e,a)=>{const l=j("RouterLink"),f=L;return d(),i("div",H,[c("div",Q,[c("div",Z,[G,c("div",K,[c("div",M,[c("div",T,[C.value.phone?(d(),i("ul",X,[c("li",null,[c("span",null,[n("收"),Y,n("货"),ee,n("人："+p(C.value.consignee),1)])]),c("li",null,[c("span",null,"联系方式："+p(C.value.phone),1)]),c("li",null,[c("span",null,"收货地址："+p(C.value.area+C.value.address),1)])])):(d(),i("div",ae,"您需要先选择收货地址才可提交订单。"))]),c("div",te,[o(J,{receList:h(t).receList,onCutAddress:z},null,8,["receList"]),o($,{onUpdateList:V})])])]),le,c("div",de,[c("table",ie,[oe,c("tbody",null,[(d(!0),i(r,null,u(h(v).cartSubmit.list,(e=>(d(),i("tr",{key:e.id},[c("td",null,[o(l,{to:"/detail/"+e.goods_id,target:"_blank",class:"info"},{default:s((()=>[c("img",{src:e.goods_img,alt:""},null,8,se),c("div",ne,[c("p",null,[c("span",ce,p(e.goodsname),1)]),c("p",null,[n(" 型号："),c("span",re,p(e.goods_edition),1)]),c("p",null,[n(" 颜色："),c("span",ue,p(e.goods_color),1)])])])),_:2},1032,["to"])]),c("td",null,"¥ "+p(e.price),1),c("td",null,p(e.goods_num),1),c("td",null,"¥ "+p(e.price*e.goods_num),1),c("td",ge," ¥ "+p(e.price*e.goods_num),1)])))),128))])])]),pe,c("div",ve,[c("span",{class:g([{active:1===S.value},"my-btn"]),onClick:a[0]||(a[0]=e=>E(1))}," 不限送货时间：周一至周日 ",2),c("span",{class:g([{active:2===S.value},"my-btn"]),onClick:a[1]||(a[1]=e=>E(2))}," 工作日送货：周一至周五 ",2),c("span",{class:g([{active:3===S.value},"my-btn"]),onClick:a[2]||(a[2]=e=>E(3))}," 双休日、假日送货：周六至周日 ",2)]),fe,c("div",xe,[c("span",{class:g([{active:1===q.value},"my-btn"]),onClick:a[3]||(a[3]=e=>U(1))}," 在线支付 ",2),c("span",{class:g([{active:2===q.value},"my-btn"]),onClick:a[4]||(a[4]=e=>U(2))}," 货到付款 ",2),he]),me,c("div",be,[c("div",ye,[c("dl",null,[_e,c("dd",null,p(h(v).cartSubmit.totalNum)+" 件",1)]),c("dl",null,[ke,c("dd",null,"¥ "+p(h(v).cartSubmit.totalPrice.toFixed(2)),1)]),je,c("dl",null,[we,c("dd",Ce," ¥ "+p((h(v).cartSubmit.totalPrice+10).toFixed(2)),1)])])]),c("div",Ve,[o(f,{onClick:F,type:"primary",size:"large"},{default:s((()=>[n("提交订单")])),_:1})])])])])}}},[["__scopeId","data-v-ac680e04"]]))}}}));
